<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CyberGame Arena 2.0</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:Arial, sans-serif;
}

body{
    background:black;
    color:#0ff;
    text-align:center;
    overflow:hidden;
}

h1{
    margin:15px;
    text-shadow:0 0 10px #0ff, 0 0 20px #00f;
}

button{
    padding:10px 20px;
    margin:5px;
    border:none;
    background:#0ff;
    cursor:pointer;
    font-weight:bold;
}

button:hover{
    background:#00f;
    color:white;
}

#gameArea{
    position:relative;
    width:100%;
    height:60vh;
    border:2px solid #0ff;
    margin-top:20px;
    overflow:hidden;
}

.enemy{
    position:absolute;
    width:40px;
    height:40px;
    background:red;
    border-radius:50%;
}

.player{
    position:absolute;
    width:40px;
    height:40px;
    background:#0ff;
    border-radius:50%;
}

#scoreBoard{
    margin-top:10px;
}

@media(max-width:600px){
    #gameArea{
        height:50vh;
    }
}
</style>
</head>

<body>

<h1>âš¡ CYBERGAME ARENA 2.0 âš¡</h1>

<div>
    Moeilijkheid:
    <select id="difficulty">
        <option value="2000">Makkelijk</option>
        <option value="1000">Normaal</option>
        <option value="500">Moeilijk</option>
    </select>
</div>

<button onclick="startGame()">Start Game</button>
<button onclick="toggleMusic()">ðŸŽµ Muziek</button>

<div id="scoreBoard">
    Speler 1: <span id="score1">0</span> |
    Speler 2: <span id="score2">0</span> |
    Level: <span id="level">1</span>
</div>

<div id="gameArea"></div>

<audio id="bgMusic" loop>
<source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>

<script>
let score1=0, score2=0;
let level=1;
let gameInterval;
let enemyInterval;
let player1, player2;
let difficulty;
let speed=2;

/* START GAME */
function startGame(){
    const area=document.getElementById("gameArea");
    area.innerHTML="";
    score1=0; score2=0; level=1;
    updateUI();

    difficulty=document.getElementById("difficulty").value;

    player1=createPlayer(50,"player");
    player2=createPlayer(150,"player");

    area.appendChild(player1);
    area.appendChild(player2);

    enemyInterval=setInterval(spawnEnemy,difficulty);
}

/* CREATE PLAYER */
function createPlayer(x,cls){
    const p=document.createElement("div");
    p.className=cls;
    p.style.left=x+"px";
    p.style.top="200px";
    return p;
}

/* SPAWN ENEMY */
function spawnEnemy(){
    const area=document.getElementById("gameArea");
    const enemy=document.createElement("div");
    enemy.className="enemy";
    enemy.style.left=Math.random()* (area.clientWidth-40)+"px";
    enemy.style.top="0px";
    area.appendChild(enemy);

    let fall=setInterval(()=>{
        enemy.style.top=enemy.offsetTop+speed+"px";

        if(enemy.offsetTop>area.clientHeight){
            area.removeChild(enemy);
            clearInterval(fall);
        }

        if(checkCollision(enemy,player1)){
            score1++;
            nextLevel();
            area.removeChild(enemy);
            clearInterval(fall);
        }

        if(checkCollision(enemy,player2)){
            score2++;
            nextLevel();
            area.removeChild(enemy);
            clearInterval(fall);
        }

    },20);
}

/* COLLISION */
function checkCollision(a,b){
    return !(
        a.offsetTop > b.offsetTop+40 ||
        a.offsetTop+40 < b.offsetTop ||
        a.offsetLeft > b.offsetLeft+40 ||
        a.offsetLeft+40 < b.offsetLeft
    );
}

/* LEVEL SYSTEM */
function nextLevel(){
    if((score1+score2)%5===0){
        level++;
        speed+=1;
        updateUI();
    }
}

function updateUI(){
    document.getElementById("score1").innerText=score1;
    document.getElementById("score2").innerText=score2;
    document.getElementById("level").innerText=level;
}

/* CONTROLS */
document.addEventListener("keydown",e=>{
    if(!player1) return;

    if(e.key==="a") player1.style.left=player1.offsetLeft-20+"px";
    if(e.key==="d") player1.style.left=player1.offsetLeft+20+"px";

    if(e.key==="ArrowLeft") player2.style.left=player2.offsetLeft-20+"px";
    if(e.key==="ArrowRight") player2.style.left=player2.offsetLeft+20+"px";
});

/* MUSIC */
function toggleMusic(){
    const music=document.getElementById("bgMusic");
    if(music.paused){
        music.play();
    }else{
        music.pause();
    }
}
</script>

</body>
</html>
